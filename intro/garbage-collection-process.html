<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Generational Garbage Collection Process | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.6">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../intro/jvm-opts.html" />
    
    
    <link rel="prev" href="../intro/jvm-generation.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="1.4"
        data-chapter-title="Generational Garbage Collection Process"
        data-filepath="intro/garbage-collection-process.md"
        data-basepath=".."
        data-revision="Tue Dec 22 2015 22:07:51 GMT+0800 (CST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="intro/introduction.html">
            
                
                    <a href="../intro/introduction.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Basic conception, instruction and tools
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="intro/jvm-architecture.html">
            
                
                    <a href="../intro/jvm-architecture.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        HotSpot JVM Architecture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="intro/automatic_Garbage_Collection.html">
            
                
                    <a href="../intro/automatic_Garbage_Collection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Automatic Garbage Collection
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="intro/jvm-generation.html">
            
                
                    <a href="../intro/jvm-generation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        JVM Generation
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1.4" data-path="intro/garbage-collection-process.html">
            
                
                    <a href="../intro/garbage-collection-process.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Generational Garbage Collection Process
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="intro/jvm-opts.html">
            
                
                    <a href="../intro/jvm-opts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        JVM OPTS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="intro/jmap.html">
            
                
                    <a href="../intro/jmap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        jmap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="intro/jstack.html">
            
                
                    <a href="../intro/jstack.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        jstack
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="hang/jvm-hang.html">
            
                
                    <a href="../hang/jvm-hang.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        JVM Hang
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="oom/oom.html">
            
                
                    <a href="../oom/oom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Out of Memory
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="crash/jvm-crash.html">
            
                
                    <a href="../crash/jvm-crash.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        JVM Crash
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="cpu/high-cpu.html">
            
                
                    <a href="../cpu/high-cpu.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        High CPU Usage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="descriptor/descriptor.html">
            
                
                    <a href="../descriptor/descriptor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        File Descriptor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="labs/labs.html">
            
                
                    <a href="../labs/labs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Labs
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="labs/lab-heap-usage.html">
            
                
                    <a href="../labs/lab-heap-usage.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Generational Garbage Collection Process
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="labs/lab-thread-deadlock.html">
            
                
                    <a href="../labs/lab-thread-deadlock.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Java Threads Deadlock
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="generational-garbage-collection-process">Generational Garbage Collection Process</h1>
<p>The pictures below walks through the object allocation and aging process in the JVM.</p>
<h2 id="step-i-object-allocation">Step I: Object Allocation</h2>
<p>First, any new objects are allocated to the eden space. Both survivor spaces start out empty</p>
<p><img src="img/gc-process-1.PNG" alt="Object Allocation"></p>
<h2 id="setp-ii-filling-the-eden-space">Setp II: Filling the Eden Space</h2>
<p>When the eden space fills up, a minor garbage collection is triggered.</p>
<p><img src="img/gc-process-2.PNG" alt="Filling the Eden Space"></p>
<h2 id="step-iii-copying-referenced-objects">Step III: Copying Referenced Objects</h2>
<p>Referenced objects are moved to the firet survivor space. Unreferenced objects are deleted when the eden space is cleared.</p>
<p><img src="img/gc-process-3.PNG" alt="Copying Referenced Objects"></p>
<h2 id="step-iv-object-aging">Step IV: Object Aging</h2>
<p>At the next minor GC, the same thing happens for the eden space. Unreferenced objects are deleted and referenced objects are moved to a survivor space. However, in this case, they are moved to the second survivor space (S1). In addition, objects from the last minor GC on the first survivor space (S0) have their age incremented and get moved to S1. Once all surviving objects have been moved to S1, both S0 and eden are cleared. Notice we now have differently aged object in the survivor space.</p>
<p><img src="img/gc-process-4.PNG" alt="Object Aging"></p>
<h2 id="step-v-additional-aging">Step V: Additional Aging</h2>
<p>At the next minor GC, the same process repeats. However this time the survivor spaces switch. Referenced objects are moved to S0. Surviving objects are aged. Eden and S1 are cleared.</p>
<p><img src="img/gc-process-5.PNG" alt="Additional Aging"></p>
<h2 id="step-vi-promotion">Step VI: Promotion</h2>
<p>This slide demonstrates promotion. After a minor GC, when aged objects reach a certain age threshold (8 in this example) they are promoted from young generation to old generation.</p>
<p><img src="img/gc-process-6.PNG" alt="Promotion"></p>
<h2 id="step-vii-additional-promotion">Step VII: Additional Promotion</h2>
<p>As minor GCs continue to occure objects will continue to be promoted to the old generation space.</p>
<p><img src="img/gc-process-7.PNG" alt="Additional Promotion"></p>
<h2 id="step-viii-gc-process-summary">Step VIII: GC Process Summary</h2>
<p>So that pretty much covers the entire process with the young generation. Eventually, a major GC will be performed on the old generation which cleans up and compacts that space.</p>
<p><img src="img/gc-process-8.PNG" alt="GC Process Summary"></p>
<h1 id="generational-garbage-collection-process-lab">Generational Garbage Collection Process Lab</h1>
<p><a href="../labs/lab-heap-usage.html"><em>Generational Garbage Collection Process Lab</em></a></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../intro/jvm-generation.html" class="navigation navigation-prev " aria-label="Previous page: JVM Generation"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../intro/jvm-opts.html" class="navigation navigation-next " aria-label="Next page: JVM OPTS"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
